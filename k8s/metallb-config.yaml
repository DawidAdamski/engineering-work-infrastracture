# MetalLB Configuration for LoadBalancer Services
# MetalLB provides LoadBalancer services in bare-metal Kubernetes (like Minikube)
#
# Installation:
#   1. Install MetalLB: kubectl apply -f https://raw.githubusercontent.com/metallb/metallb/v0.14.8/config/manifests/metallb-native.yaml
#   2. Wait for MetalLB to be ready: kubectl wait --namespace metallb-system --for=condition=ready pod --selector=app=metallb --timeout=90s
#   3. Apply this config: kubectl apply -f k8s/metallb-config.yaml
#
# For Minikube, use Layer 2 mode with the Minikube IP range.
# Get Minikube IP: minikube ip
# Then configure the IPAddressPool to use a range in the same subnet.

apiVersion: metallb.io/v1beta1
kind: IPAddressPool
metadata:
  name: default-pool
  namespace: metallb-system
spec:
  addresses:
    # Replace with your Minikube IP range
    # Example: if minikube ip returns 192.168.49.2, use 192.168.49.100-192.168.49.200
    # For Docker driver, typically: 172.17.0.100-172.17.0.200
    # For better compatibility, use a small range that doesn't conflict
    - 172.17.0.100-172.17.0.200
---
apiVersion: metallb.io/v1beta1
kind: L2Advertisement
metadata:
  name: default
  namespace: metallb-system
spec:
  ipAddressPools:
    - default-pool
