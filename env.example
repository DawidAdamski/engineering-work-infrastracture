# Environment Variables Configuration
# 
# This file contains all environment variables used in the infrastructure.
# Copy this file to .env and fill in actual values (NEVER commit .env to git)
#
# Usage:
#   cp env.example .env
#   # Edit .env with actual values
#   # Add .env to .gitignore

# =============================================================================
# PostgreSQL Database Configuration
# =============================================================================

# Database credentials (from k8s/secrets.yaml - postgres-secret)
POSTGRES_USER=crmuser
POSTGRES_PASSWORD=changeme
POSTGRES_DB=crmdb

# Database connection (from k8s/configmaps.yaml - crm-config)
POSTGRES_HOST=postgres.crm-rfm.svc.cluster.local
POSTGRES_PORT=5432

# =============================================================================
# Qdrant Vector Database Configuration
# =============================================================================

# Qdrant connection (from k8s/configmaps.yaml - crm-config)
QDRANT_URL=http://qdrant.crm-rfm.svc.cluster.local:6333
QDRANT_GRPC_URL=qdrant.crm-rfm.svc.cluster.local:6334
QDRANT_COLLECTION=customers
QDRANT_API_KEY=

# =============================================================================
# OpenAI API Configuration
# =============================================================================

# OpenAI API key for embedding generation (from k8s/secrets.yaml - crm-secrets)
# Get your API key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-XXXXXXXXXX
OPENAI_MODEL=text-embedding-3-large
OPENAI_API_URL=https://api.openai.com/v1/embeddings

# =============================================================================
# n8n Workflow Automation Configuration
# =============================================================================

# n8n connection (from k8s/n8n.yaml)
N8N_HOST=n8n.crm-rfm.svc.cluster.local
N8N_PORT=5678
N8N_PROTOCOL=http
N8N_URL=http://n8n.crm-rfm.svc.cluster.local:5678

# n8n authentication (optional, for UI access)
N8N_BASIC_AUTH_USER=
N8N_BASIC_AUTH_PASSWORD=

# =============================================================================
# CRM API Configuration
# =============================================================================

# CRM API connection (from k8s/configmaps.yaml - crm-config)
CRM_API_URL=http://crm-api.crm-rfm.svc.cluster.local:8000
CRM_API_PORT=8000

# Application settings (from k8s/configmaps.yaml - crm-config)
LOG_LEVEL=INFO

# =============================================================================
# ArgoCD Configuration
# =============================================================================

# ArgoCD server connection (from docs/README.argocd.md)
ARGOCD_SERVER_ADDR=argocd-server.argocd.svc.cluster.local:443
ARGOCD_INSECURE=false
ARGOCD_GRPC_WEB=true

# ArgoCD admin credentials (get from secret: argocd-initial-admin-secret)
# Retrieve with: kubectl -n argocd get secret argocd-initial-admin-secret -o jsonpath="{.data.password}" | base64 -d
ARGOCD_USERNAME=admin
ARGOCD_PASSWORD=

# ArgoCD repository configuration
ARGOCD_REPO_URL=https://github.com/DawidAdamski/engineering-work-infrastracture
ARGOCD_REPO_BRANCH=main

# =============================================================================
# Kubernetes Configuration
# =============================================================================

# Kubernetes namespace
NAMESPACE=crm-rfm
ARGOCD_NAMESPACE=argocd

# Kubernetes context (if using multiple clusters)
KUBECONFIG=

# =============================================================================
# Minikube Configuration
# =============================================================================

# Minikube settings
MINIKUBE_DRIVER=hyperv
MINIKUBE_CONTAINER_RUNTIME=crio
MINIKUBE_CPUS=4
MINIKUBE_MEMORY=8192

# =============================================================================
# Storage Configuration
# =============================================================================

# Storage class for PersistentVolumes
STORAGE_CLASS=standard
STORAGE_SIZE=5Gi

# =============================================================================
# Ingress Configuration
# =============================================================================

# Ingress hostname (requires /etc/hosts entry: 127.0.0.1 crm.local)
INGRESS_HOST=crm.local
INGRESS_CLASS=nginx

# =============================================================================
# Development/Testing Configuration
# =============================================================================

# Enable debug logging
DEBUG=false

# Test data configuration
ENABLE_TEST_DATA=false

# =============================================================================
# Port Forwarding (for local access)
# =============================================================================

# Local ports for port-forwarding (when accessing services locally)
LOCAL_POSTGRES_PORT=5432
LOCAL_QDRANT_REST_PORT=6333
LOCAL_QDRANT_GRPC_PORT=6334
LOCAL_N8N_PORT=5678
LOCAL_CRM_API_PORT=8000
LOCAL_ARGOCD_PORT=8080

# =============================================================================
# Example Commands
# =============================================================================

# Port-forward commands:
# kubectl port-forward svc/postgres LOCAL_POSTGRES_PORT:5432 -n crm-rfm
# kubectl port-forward svc/qdrant LOCAL_QDRANT_REST_PORT:6333 -n crm-rfm
# kubectl port-forward svc/n8n LOCAL_N8N_PORT:5678 -n crm-rfm
# kubectl port-forward svc/crm-api LOCAL_CRM_API_PORT:8000 -n crm-rfm
# kubectl port-forward svc/argocd-server LOCAL_ARGOCD_PORT:443 -n argocd

# =============================================================================
# Security Notes
# =============================================================================

# NEVER commit this file with actual credentials to version control
# Add .env to .gitignore
# Use Kubernetes Secrets for production deployments
# Rotate credentials regularly
# Use strong passwords (minimum 16 characters)
# Store API keys securely (use secret management tools)

